{"version":3,"sources":["webpack:///./src/shared/wave-encoder.js","webpack:///./src/shared/RecorderService.js","webpack:///./src/shared/Utils.js","webpack:///src/views/Test1.vue","webpack:///./src/views/Test1.vue?080f","webpack:///./src/views/Test1.vue","webpack:///src/App.vue","webpack:///./src/App.vue?ed6c","webpack:///./src/App.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?074a","webpack:///./src/views/Home.vue","webpack:///src/views/Diagnostics.vue","webpack:///./src/views/Diagnostics.vue?0e74","webpack:///./src/views/Diagnostics.vue","webpack:///src/views/Test2.vue","webpack:///./src/views/Test2.vue?4f3d","webpack:///./src/views/Test2.vue","webpack:///./src/shared/WebAudioPeakMeter.js","webpack:///src/views/Test3.vue","webpack:///./src/views/Test3.vue?b24e","webpack:///./src/views/Test3.vue","webpack:///src/views/Test4.vue","webpack:///./src/views/Test4.vue?2d55","webpack:///./src/views/Test4.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["MimeType","wave_encoder","BYTES_PER_SAMPLE","recorded","encode","buffer","length","data","Uint8Array","i","index","sample","push","dump","sampleRate","bufferLength","wav","view","DataView","setUint32","setUint16","set","postMessage","onmessage","e","this","close","RecorderService_RecorderService","RecorderService","classCallCheck_default","window","AudioContext","webkitAudioContext","em","document","createDocumentFragment","state","chunks","chunkType","usingMediaRecorder","MediaRecorder","config","broadcastAudioProcessEvents","forceScriptProcessor","micGain","processorBufferSize","stopTracksAndCloseCtxWhenFinished","userMediaConstraints","audio","fn","js","toString","replace","blob","Blob","Worker","URL","createObjectURL","timeslice","_this","audioCtx","micGainNode","createGain","outputGainNode","processorNode","createScriptProcessor","createMediaStreamDestination","destinationNode","destination","encoderWorker","createWorker","addEventListener","event","Event","type","_onDataAvailable","console","log","navigator","mediaDevices","getUserMedia","then","stream","_startRecordingWithStream","newGain","gain","setValueAtTime","currentTime","_this2","micAudioStream","inputStreamNode","createMediaStreamSource","context","onGraphSetupWithInputStream","connect","onaudioprocess","_onAudioProcess","mediaRecorder","evt","_onError","start","slicing","setInterval","dispatchEvent","CustomEvent","detail","inputBuffer","outputBuffer","getChannelData","stop","clearInterval","blobUrl","recording","ts","Date","getTime","mimeType","size","disconnect","getTracks","forEach","track","alert","Utils_Utils","Utils","createClass_default","key","value","bytes","si","thresh","Math","abs","units","u","toFixed","userAgent","match","shared_Utils","Test1","cleanupWhenFinished","startRecording","catch","error","message","stopRecording","Test1_render","_vm","_h","$createElement","_c","_self","attrs","mb-5","row","wrap","staticClass","_v","$vuetify","breakpoint","_e","xsOnly","disabled","recordingInProgress","on","click","class","xs10","md6","label","max","model","callback","$$v","micGainSlider","expression","xs2","_s","recordings","column","_l","idx","primary-title","src","controls","_f","href","hidden-xs-only","staticRenderFns","injectStyle","__webpack_require__","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","Object","component_normalizer","views_Test1","App","App_render","id","fixed","temporary","app","drawer","dense","to","color","dark","$event","stopPropagation","large","fluid","App_staticRenderFns","App_injectStyle","App___vue_template_functional__","App___vue_styles__","App___vue_scopeId__","App___vue_module_identifier__","App_Component","src_App","Home","Home_render","md3","Home_staticRenderFns","Home_injectStyle","Home___vue_template_functional__","Home___vue_styles__","Home___vue_scopeId__","Home___vue_module_identifier__","Home_Component","views_Home","Diagnostics","enumerateDevices","getSupportedConstraints","constraint","availDevices","devices","setupAvailDeviceNames","_this3","Diagnostics_render","xs12","audioContextStr","webkitAudioContextStr","mediaRecorderOrigStr","mediaRecorderPolyfilled","name","sm6","requestDevicePermissions","revokeDevicePermissions","deviceConstraint","mimetype","supported","mt-3","Diagnostics_staticRenderFns","Diagnostics_injectStyle","Diagnostics___vue_template_functional__","Diagnostics___vue_styles__","Diagnostics___vue_scopeId__","Diagnostics___vue_module_identifier__","Diagnostics_Component","views_Diagnostics","Test2","numAudioSamples","channel","Test2_render","ref","addNoise","Test2_staticRenderFns","Test2_injectStyle","Test2___vue_template_functional__","Test2___vue_styles__","Test2___vue_scopeId__","Test2___vue_module_identifier__","Test2_Component","views_Test2","WebAudioPeakMeter_WebAudioPeakMeter","WebAudioPeakMeter","defineProperty","configurable","enumerable","writable","x","y","floatVal","getBaseLog","userOptions","k","options","tickWidth","fontSize","meterTop","borderSize","sourceNode","c","channelCount","meterNode","parent","meterElement","createElement","style","position","width","elementWidth","height","elementHeight","backgroundColor","appendChild","domElement","optionsOverrides","setOptions","clientWidth","clientHeight","createContainerDiv","vertical","meterHeight","meterWidth","createTicks","createRainbow","channelWidth","channelLeft","createChannelMask","channelMasks","maskTransition","channelPeaks","channelPeakLabels","createPeakLabel","updateMeter","textContent","numTicks","floor","dbRange","dbTickSize","dbTickLabel","dbTickTop","dbTick","textAlign","tickColor","top","left","rainbow","gradientStyle","gradient","join","backgroundImage","transition","channelMask","d","returnVal","dbFromFloat","audioProcessingEvent","channelData","channelMaxes","thisMaskSize","maskSize","labelText","webAudioPeakMeter1","webAudioPeakMeter2","Test3","Test3_render","xs6","sm2","staticStyle","margin","border","Test3_staticRenderFns","Test3_injectStyle","Test3___vue_template_functional__","Test3___vue_styles__","Test3___vue_scopeId__","Test3___vue_module_identifier__","Test3_Component","views_Test3","Test4","deviceId","device","_this4","_this5","Test4_render","xs9","items","availableDevices","single-line","item-text","item-value","selectedDevice","xs1","flat","small","enumerateDevicesWithPermission","Test4_staticRenderFns","Test4_injectStyle","Test4___vue_template_functional__","Test4___vue_styles__","Test4___vue_scopeId__","Test4___vue_module_identifier__","Test4_Component","views_Test4","vue_runtime_esm","use","vue_router_esm","router","mode","routes","path","component","src_router","vuetify_default","a","theme","primary","secondary","accent","warning","info","success","productionTip","render","h","$mount"],"mappings":"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","file":"js/app.accfd6ce.js","sourcesContent":["export const MimeType = 'audio/wave'\n\n// Parts copied from https://github.com/chris-rudmin/Recorderjs\nexport default function () {\n  let BYTES_PER_SAMPLE = 2\n  let recorded = []\n\n  function encode (buffer) {\n    let length = buffer.length\n    let data = new Uint8Array(length * BYTES_PER_SAMPLE)\n    for (let i = 0; i < length; i++) {\n      let index = i * BYTES_PER_SAMPLE\n      let sample = buffer[i]\n      if (sample > 1) {\n        sample = 1\n      }\n      else if (sample < -1) {\n        sample = -1\n      }\n      sample = sample * 32768\n      data[index] = sample\n      data[index + 1] = sample >> 8\n    }\n    recorded.push(data)\n  }\n\n  function dump (sampleRate) {\n    let bufferLength = recorded.length ? recorded[0].length : 0\n    let length = recorded.length * bufferLength\n    let wav = new Uint8Array(44 + length)\n\n    let view = new DataView(wav.buffer)\n\n    // RIFF identifier 'RIFF'\n    view.setUint32(0, 1380533830, false)\n    // file length minus RIFF identifier length and file description length\n    view.setUint32(4, 36 + length, true)\n    // RIFF type 'WAVE'\n    view.setUint32(8, 1463899717, false)\n    // format chunk identifier 'fmt '\n    view.setUint32(12, 1718449184, false)\n    // format chunk length\n    view.setUint32(16, 16, true)\n    // sample format (raw)\n    view.setUint16(20, 1, true)\n    // channel count\n    view.setUint16(22, 1, true)\n    // sample rate\n    view.setUint32(24, sampleRate, true)\n    // byte rate (sample rate * block align)\n    view.setUint32(28, sampleRate * BYTES_PER_SAMPLE, true)\n    // block align (channel count * bytes per sample)\n    view.setUint16(32, BYTES_PER_SAMPLE, true)\n    // bits per sample\n    view.setUint16(34, 8 * BYTES_PER_SAMPLE, true)\n    // data chunk identifier 'data'\n    view.setUint32(36, 1684108385, false)\n    // data chunk length\n    view.setUint32(40, length, true)\n\n    for (var i = 0; i < recorded.length; i++) {\n      wav.set(recorded[i], i * bufferLength + 44)\n    }\n\n    recorded = []\n    postMessage(wav.buffer, [wav.buffer])\n  }\n\n  onmessage = function (e) {\n    if (e.data[0] === 'encode') {\n      encode(e.data[1])\n    }\n    else if (e.data[0] === 'dump') {\n      dump(e.data[1])\n    }\n    else if (e.data[0] === 'close') {\n      this.close()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/wave-encoder.js","import encoder, {MimeType as encoderMimeType} from './wave-encoder'\n\nexport default class RecorderService {\n  constructor () {\n    window.AudioContext = window.AudioContext || window.webkitAudioContext\n\n    this.em = document.createDocumentFragment()\n\n    this.state = 'inactive'\n\n    this.chunks = []\n    this.chunkType = ''\n\n    this.usingMediaRecorder = window.MediaRecorder || false\n\n    this.config = {\n      broadcastAudioProcessEvents: false,\n      forceScriptProcessor: false,\n      micGain: 1.0,\n      processorBufferSize: 2048,\n      stopTracksAndCloseCtxWhenFinished: true,\n      userMediaConstraints: {audio: true}\n    }\n  }\n\n  createWorker (fn) {\n    var js = fn\n      .toString()\n      .replace(/^function\\s*\\(\\)\\s*{/, '')\n      .replace(/}$/, '')\n    var blob = new Blob([js])\n    return new Worker(URL.createObjectURL(blob))\n  }\n\n  startRecording (timeslice) {\n    if (this.state !== 'inactive') {\n      return\n    }\n\n    this.audioCtx = new AudioContext()\n    this.micGainNode = this.audioCtx.createGain()\n    this.outputGainNode = this.audioCtx.createGain()\n\n    // If not using MediaRecorder(i.e. safari and edge), then a script processor is required. It's optional\n    // on browsers using MediaRecorder and is only useful if wanting to do custom analysis or manipulation of\n    // recorded audio data.\n    if (this.config.forceScriptProcessor || this.config.broadcastAudioProcessEvents || !this.usingMediaRecorder) {\n      this.processorNode = this.audioCtx.createScriptProcessor(this.config.processorBufferSize, 1, 1) // TODO: Get the number of channels from mic\n    }\n\n    // Create stream destination on chrome/firefox because, AFAICT, we have no other way of feeding audio graph output\n    // in to MediaRecorderSafari/Edge don't have this method as of 2018-04.\n    if (this.audioCtx.createMediaStreamDestination) {\n      this.destinationNode = this.audioCtx.createMediaStreamDestination()\n    }\n    else {\n      this.destinationNode = this.audioCtx.destination\n    }\n\n    // Create web worker for doing the encoding\n    if (!this.usingMediaRecorder) {\n      this.encoderWorker = this.createWorker(encoder)\n      this.encoderWorker.addEventListener('message', (e) => {\n        let event = new Event('dataavailable')\n        event.data = new Blob([e.data], {type: encoderMimeType})\n        this._onDataAvailable(event)\n      })\n    }\n\n    console.log('constraints', this.config.userMediaConstraints)\n    // This will prompt user for permission if needed\n    return navigator.mediaDevices.getUserMedia(this.config.userMediaConstraints)\n      .then((stream) => {\n        this._startRecordingWithStream(stream, timeslice)\n      })\n  }\n\n  setMicGain (newGain) {\n    this.config.micGain = newGain\n    if (this.audioCtx && this.micGainNode) {\n      this.micGainNode.gain.setValueAtTime(newGain, this.audioCtx.currentTime)\n    }\n  }\n\n  _startRecordingWithStream (stream, timeslice) {\n    this.micAudioStream = stream\n\n    this.inputStreamNode = this.audioCtx.createMediaStreamSource(this.micAudioStream)\n    this.audioCtx = this.inputStreamNode.context\n\n    // Kind-of a hack to allow hooking in to audioGraph inputStreamNode\n    if (this.onGraphSetupWithInputStream) {\n      this.onGraphSetupWithInputStream(this.inputStreamNode)\n    }\n    this.inputStreamNode.connect(this.micGainNode)\n\n    this.micGainNode.gain.setValueAtTime(this.config.micGain, this.audioCtx.currentTime)\n\n    if (this.processorNode) {\n      this.processorNode.onaudioprocess = (e) => this._onAudioProcess(e)\n    }\n\n    this.state = 'recording'\n\n    if (this.processorNode) {\n      this.micGainNode.connect(this.processorNode)\n      this.processorNode.connect(this.outputGainNode)\n      this.outputGainNode.connect(this.destinationNode)\n    }\n    else {\n      this.micGainNode.connect(this.outputGainNode)\n      this.outputGainNode.connect(this.destinationNode)\n    }\n\n    if (this.usingMediaRecorder) {\n      this.mediaRecorder = new MediaRecorder(this.destinationNode.stream)\n      this.mediaRecorder.addEventListener('dataavailable', (evt) => this._onDataAvailable(evt))\n      this.mediaRecorder.addEventListener('error', (evt) => this._onError(evt))\n\n      this.mediaRecorder.start(timeslice)\n    }\n    else {\n      // Output gain to zero to prevent feedback. Seems to matter only on Edge, though seems like should matter\n      // on iOS too.  Matters on chrome when connecting graph to directly to audioCtx.destination, but we are\n      // not able to do that when using MediaRecorder.\n      this.outputGainNode.gain.setValueAtTime(0, this.audioCtx.currentTime)\n      // this.outputGainNode.gain.value = 0\n\n      // Todo: Note that time slicing with manual wav encoder won't work. To allow it would require rewriting the encoder\n      // to assemble all chunks at end instead of adding header to each chunk.\n      if (timeslice) {\n        console.log('Time slicing without MediaRecorder is not yet supported. The resulting recording will not be playable.')\n        this.slicing = setInterval(function () {\n          if (this.state === 'recording') {\n            this.encoderWorker.postMessage(['dump', this.context.sampleRate])\n          }\n        }, timeslice)\n      }\n    }\n  }\n\n  _onAudioProcess (e) {\n    // console.log('onaudioprocess', e)\n    // let inputBuffer = e.inputBuffer\n    // let outputBuffer = e.outputBuffer\n\n    // this.onAudioEm.dispatch(new Event('onaudioprocess', {inputBuffer:inputBuffer,outputBuffer:outputBuffer}))\n\n    if (this.config.broadcastAudioProcessEvents) {\n      this.em.dispatchEvent(new CustomEvent('onaudioprocess', {\n        detail: {\n          inputBuffer: e.inputBuffer,\n          outputBuffer: e.outputBuffer\n        }\n      }))\n    }\n\n    // // Example handling:\n    // let inputBuffer = e.inputBuffer\n    // let outputBuffer = e.outputBuffer\n    // // Each channel (usually only one)\n    // for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {\n    //   let inputData = inputBuffer.getChannelData(channel)\n    //   let outputData = outputBuffer.getChannelData(channel)\n    //\n    //   // Each sample\n    //   for (let sample = 0; sample < inputBuffer.length; sample++) {\n    //     // Make output equal to the same as the input (thus processor is doing nothing at this time)\n    //     outputData[sample] = inputData[sample]\n    //   }\n    // }\n\n    // When manually encoding (safari/edge), there's no reason to copy data to output buffer.  We set the output\n    // gain to 0 anyways (which is required on Edge if we did copy data to output). However, if using a MediaRecorder\n    // and a processor (all other browsers), then it would be required to copy the data otherwise the graph would\n    // generate no data for the MediaRecorder to consume.\n    // if (this.forceScriptProcessor) {\n\n    // // Copy input to output\n    // let inputBuffer = e.inputBuffer\n    // let outputBuffer = e.outputBuffer\n    // // This doesn't work on iOS/Safari. Guessing it doesn't have copyToChannel support, but haven't verified.\n    // for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {\n    //   outputBuffer.copyToChannel(inputBuffer.getChannelData(channel), channel)\n    // }\n\n    // Safari and Edge require manual encoding via web worker. Single channel only for now.\n    // Example stereo encoder: https://github.com/MicrosoftEdge/Demos/blob/master/microphone/scripts/recorderworker.js\n    if (!this.usingMediaRecorder) {\n      if (this.state === 'recording') {\n        if (this.config.broadcastAudioProcessEvents) {\n          this.encoderWorker.postMessage(['encode', e.outputBuffer.getChannelData(0)])\n        }\n        else {\n          this.encoderWorker.postMessage(['encode', e.inputBuffer.getChannelData(0)])\n        }\n      }\n    }\n  }\n\n  stopRecording () {\n    if (this.state === 'inactive') {\n      return\n    }\n    if (this.usingMediaRecorder) {\n      this.state = 'inactive'\n      this.mediaRecorder.stop()\n    }\n    else {\n      this.state = 'inactive'\n      this.encoderWorker.postMessage(['dump', this.audioCtx.sampleRate])\n      clearInterval(this.slicing)\n\n      // TODO: There should be a more robust way to handle this\n      // Without something like this, I think  the last recorded sample could be lost due to timing\n      // setTimeout(() => {\n      //   this.state = 'inactive'\n      //   this.encoderWorker.postMessage(['dump', this.audioCtx.sampleRate])\n      // }, 100)\n    }\n  }\n\n  _onDataAvailable (evt) {\n    // console.log('state', this.mediaRecorder.state)\n    // console.log('evt.data', evt.data)\n\n    this.chunks.push(evt.data)\n    this.chunkType = evt.data.type\n\n    if (this.state !== 'inactive') {\n      return\n    }\n\n    let blob = new Blob(this.chunks, {'type': this.chunkType})\n    let blobUrl = URL.createObjectURL(blob)\n    const recording = {\n      ts: new Date().getTime(),\n      blobUrl: blobUrl,\n      mimeType: blob.type,\n      size: blob.size\n    }\n\n    this.chunks = []\n    this.chunkType = null\n\n    if (this.destinationNode) {\n      this.destinationNode.disconnect()\n      this.destinationNode = null\n    }\n    if (this.outputGainNode) {\n      this.outputGainNode.disconnect()\n      this.outputGainNode = null\n    }\n    if (this.processorNode) {\n      this.processorNode.disconnect()\n      this.processorNode = null\n    }\n    if (this.encoderWorker) {\n      this.encoderWorker.postMessage(['close'])\n      this.encoderWorker = null\n    }\n    if (this.micGainNode) {\n      this.micGainNode.disconnect()\n      this.micGainNode = null\n    }\n    if (this.inputStreamNode) {\n      this.inputStreamNode.disconnect()\n      this.inputStreamNode = null\n    }\n\n    if (this.config.stopTracksAndCloseCtxWhenFinished) {\n      // This removes the red bar in iOS/Safari\n      this.micAudioStream.getTracks().forEach((track) => track.stop())\n      this.micAudioStream = null\n\n      this.audioCtx.close()\n      this.audioCtx = null\n    }\n\n    this.em.dispatchEvent(new CustomEvent('recording', {detail: {recording: recording}}))\n  }\n\n  _onError (evt) {\n    console.log('error', evt)\n    this.em.dispatchEvent(new Event('error'))\n    alert('error:' + evt) // for debugging purposes\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/RecorderService.js","export class Utils {\r\n  // https://stackoverflow.com/a/14919494\r\n  humanFileSize (bytes, si) {\r\n    var thresh = si ? 1000 : 1024\r\n    if (Math.abs(bytes) < thresh) {\r\n      return bytes + ' B'\r\n    }\r\n    var units = si\r\n      ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\r\n      : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']\r\n    var u = -1\r\n    do {\r\n      bytes /= thresh\r\n      ++u\r\n    } while (Math.abs(bytes) >= thresh && u < units.length - 1)\r\n    return bytes.toFixed(1) + ' ' + units[u]\r\n  }\r\n\r\n  /**\r\n   * Check user agent for Safari on iOS\r\n   * @returns {boolean}\r\n   */\r\n  isIosSafari () {\r\n    return navigator.userAgent.match(/iP(od|hone|ad)/) &&\r\n      navigator.userAgent.match(/AppleWebKit/) &&\r\n      !navigator.userAgent.match(/(Cr|Fx|OP)iOS/)\r\n  }\r\n}\r\n\r\nexport default new Utils()\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/Utils.js","<template>\n  <v-container mb-5>\n    <v-layout row wrap>\n      <div class=\"test1\">\n        <h3>Test 1\n          <span v-if=\"$vuetify.breakpoint.xsOnly\"><br></span>\n          <span v-if=\"!$vuetify.breakpoint.xsOnly\"> - </span>\n          Repeatable Recording &amp; Playback\n        </h3>\n        <p>Click start/stop multiple times to create multiple recordings. Works on all modern browser/device\n          combinations, including iOS/Safari 11.2.x and newer.</p>\n        <div>\n          <v-btn @click=\"startRecording\" :disabled=\"recordingInProgress\">Start Recording\n          </v-btn>\n          <v-btn @click=\"stopRecording\" :disabled=\"!recordingInProgress\">Stop Recording</v-btn>\n          <v-icon :class=\"recordingInProgress ? 'live' : ''\">mic</v-icon>\n        </div>\n      </div>\n    </v-layout>\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-flex xs10 md6>\n        <v-slider label=\"Mic Gain\" :max=\"500\" v-model=\"micGainSlider\"></v-slider>\n      </v-flex>\n      <v-flex xs2>\n        <div class=\"input-group\">\n          <label>{{ micGain }}</label>\n        </div>\n      </v-flex>\n    </v-layout>\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-checkbox v-model=\"cleanupWhenFinished\"\n                  label=\"Stop tracks and close audio context when recording stopped\"></v-checkbox>\n    </v-layout>\n    <v-layout column wrap v-if=\"recordings.length > 0\">\n      <h4 class=\"mt-3\">Recordings</h4>\n      <div v-for=\"(recording,idx) in recordings\" :key=\"recording.ts\">\n        <v-card>\n          <v-card-title primary-title>\n            <v-layout column wrap>\n              <div>\n                <h3>Recording #{{ idx + 1 }}</h3>\n              </div>\n              <div class=\"ml-3\">\n                <div>\n                  <audio :src=\"recording.blobUrl\" controls=\"true\"/>\n                </div>\n                <div>\n                  size: {{recording.size | fileSizeToHumanSize}}, type: {{recording.mimeType}}\n                </div>\n              </div>\n            </v-layout>\n          </v-card-title>\n        </v-card>\n        <v-divider v-if=\"idx !== (recordings.length-1)\"/>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap class=\"mt-5\">\n      <h4>Notes\n        <small>(as of iOS 11.2.6)</small>\n      </h4>\n      <v-divider></v-divider>\n      <p>\n        There are multiple valid ways to do audio recording and playback on every browser/device combination\n        <i>except</i> iOS/Safari. I believe there are four significant issues, and only the first one seems to be well\n        known.\n      </p>\n      <div class=\"ml-4\">\n        <ul>\n          <li><strong>Security context of the getUserMedia handler is important</strong> - <br>\n            <p>\n              The most common and widely known issue issue is that the success handler of the getUserMedia is no longer\n              in the context of the user click. As a result, any audio context and processors created in the handler\n              won't work. The solution is to create the audio context and any processors before calling getUserMedia,\n              while still in the user click handler context. Then once getUserMedia provides the stream,\n              use the previously created constructs to setup the graph and start recording.\n            </p></li>\n          <li><strong>Multiple recordings require new audio streams</strong> - <br>\n            <p>\n              There are a number of demos that work for the first recording on iOS/Safari, that then fail with empty\n              audio on subsequent recordings until page is reloaded. The reason is that after stopping recording and\n              extracting playable blob, the next recording requires a new AudioStream. This AudioStream can come\n              from another call to getUserMedia (which won't prompt user after the first time), or potentially, by\n              cloning the existing audio stream.\n            </p></li>\n          <li><strong>Red recording bar indicator</strong> - <br>\n            <p>\n              After granting permission to microphone, iOS/Safari will show a red bar notification anytime user switches\n              away from the tab where permission was granted. To clear this bar, the recording stream's tracks can be\n              stopped after recording is finished. This can be tested with the checkbox above. Stopping the tracks and\n              closing the audio context is straightforward and works well, except for this last issue (but see updates):\n            </p>\n          </li>\n          <li><strong>\n            <del>A sleep/lock/switch event can easily break things, is not detectable, and is not easily\n              recoverable\n            </del>\n          </strong> - <br>\n            <del>\n              <p>\n                To see this, make a recording and verify it plays. Switch to mail app, then back to safari and\n                make/verify\n                another recording. As long as red bar/microphone is still visible, it generally works. Then, check the\n                option to stop tracks and close audio context. Make another recording and verify. Switch to mail app and\n                back and try to make another recording. Most of the time the recording will appear to work, but the\n                audio\n                will be silent. As far as I can tell, there is no way to detect this, and there is no way to recover\n                without loading a new tab or force quitting Safari.\n              </p>\n              <p><em>If</em> the tracks are not stopped and so the red bar/icon remains, then this occurs much less\n                frequently. Of course, that means the red bar is constantly visible though. And even then, starting\n                another app that uses the microphone will almost always break things again. I have not been able to find\n                a\n                way to detect, much less, programmatically fix things, when this occurs. My assumption is that the\n                underlying issue is due to low level iOS/Safari bugs, and not in how this code is setting things up.</p>\n            </del>\n          </li>\n\n          <li><strong>Any references not cleaned up after recording complete can affect stability</strong> - <br>\n            UPDATED 2018-04-10: After writing the previous section, I rewrote a number of things and removed all\n            dependencies. By doing that I was able to ensure that everything gets cleaned up when recording is\n            complete. I now no longer have stability issues on iOS, though I don't know exactly what was causing\n            it previously. I thought perhaps it was the web worker, which I now close when recording is complete. But\n            quick testing shows that even if I don't close the webworker, this new handling seems to be stable after\n            sleep/lock/switch events.\n          </li>\n\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap>\n      <h4 class=\"mt-3\">Source</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li><a href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test1.vue\">src/views/Test1.vue</a>\n            <ul class=\"ml-3\">\n              <li>Primarily: <a\n                href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\">src/shared/RecorderService.js</a>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only>\n      <h4 class=\"mt-3\">Relevant</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li><a href=\"https://github.com/muaz-khan/RecordRTC/issues/324\">https://github.com/muaz-khan/RecordRTC/issues/324</a>\n          </li>\n          <li><a href=\"https://github.com/ai/audio-recorder-polyfill/issues/4\">https://github.com/ai/audio-recorder-polyfill/issues/4</a>\n          </li>\n          <li><a href=\"https://github.com/danielstorey/webrtc-audio-recording\">https://github.com/danielstorey/webrtc-audio-recording</a>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport RecorderService from '@/shared/RecorderService'\nimport utils from '@/shared/Utils'\n\nexport default {\n  name: 'Test1',\n  filters: {\n    fileSizeToHumanSize (val) {\n      return utils.humanFileSize(val, true)\n    }\n  },\n  data () {\n    return {\n      recordingInProgress: false,\n      supportedMimeTypes: [],\n      recordings: [],\n      micGainSlider: 100,\n      micGain: 1.0,\n      cleanupWhenFinished: true\n    }\n  },\n  created () {\n    this.recorderSrvc = new RecorderService()\n    this.recorderSrvc.config.stopTracksAndCloseCtxWhenFinished = this.cleanupWhenFinished\n    this.recorderSrvc.em.addEventListener('recording', (evt) => this.onNewRecording(evt))\n  },\n  watch: {\n    cleanupWhenFinished (val) {\n      this.recorderSrvc.config.stopTracksAndCloseCtxWhenFinished = this.cleanupWhenFinished\n    },\n    micGainSlider () {\n      this.micGain = (this.micGainSlider * 0.01).toFixed(2)\n      this.recorderSrvc.setMicGain(this.micGain)\n    }\n  },\n  methods: {\n    startRecording () {\n      this.recorderSrvc.startRecording()\n        .then(() => {\n          this.recordingInProgress = true\n        })\n        .catch((error) => {\n          console.error('Exception while start recording: ' + error)\n          alert('Exception while start recording: ' + error.message)\n        })\n    },\n    stopRecording () {\n      this.recorderSrvc.stopRecording()\n      this.recordingInProgress = false\n    },\n    onNewRecording (evt) {\n      this.recordings.push(evt.detail.recording)\n    }\n  }\n}\n</script>\n<style lang=\"stylus\" scoped=\"true\">\n  @import '~vuetify/src/stylus/settings/_variables'\n  @media screen and (min-width: $grid-breakpoints.sm)\n    audio\n      width 35em\n\n  @media screen and (max-width: ($grid-breakpoints.sm - 1))\n    audio\n      width 100%\n\n  .live\n    color red\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Test1.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"mb-5\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',{staticClass:\"test1\"},[_c('h3',[_vm._v(\"Test 1\\n        \"),(_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_c('br')]):_vm._e(),(!_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_vm._v(\" - \")]):_vm._e(),_vm._v(\"\\n        Repeatable Recording & Playback\\n      \")]),_c('p',[_vm._v(\"Click start/stop multiple times to create multiple recordings. Works on all modern browser/device\\n        combinations, including iOS/Safari 11.2.x and newer.\")]),_c('div',[_c('v-btn',{attrs:{\"disabled\":_vm.recordingInProgress},on:{\"click\":_vm.startRecording}},[_vm._v(\"Start Recording\\n        \")]),_c('v-btn',{attrs:{\"disabled\":!_vm.recordingInProgress},on:{\"click\":_vm.stopRecording}},[_vm._v(\"Stop Recording\")]),_c('v-icon',{class:_vm.recordingInProgress ? 'live' : ''},[_vm._v(\"mic\")])],1)])]),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs10\":\"\",\"md6\":\"\"}},[_c('v-slider',{attrs:{\"label\":\"Mic Gain\",\"max\":500},model:{value:(_vm.micGainSlider),callback:function ($$v) {_vm.micGainSlider=$$v},expression:\"micGainSlider\"}})],1),_c('v-flex',{attrs:{\"xs2\":\"\"}},[_c('div',{staticClass:\"input-group\"},[_c('label',[_vm._v(_vm._s(_vm.micGain))])])])],1),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-checkbox',{attrs:{\"label\":\"Stop tracks and close audio context when recording stopped\"},model:{value:(_vm.cleanupWhenFinished),callback:function ($$v) {_vm.cleanupWhenFinished=$$v},expression:\"cleanupWhenFinished\"}})],1),(_vm.recordings.length > 0)?_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recordings\")]),_vm._l((_vm.recordings),function(recording,idx){return _c('div',{key:recording.ts},[_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',[_c('h3',[_vm._v(\"Recording #\"+_vm._s(idx + 1))])]),_c('div',{staticClass:\"ml-3\"},[_c('div',[_c('audio',{attrs:{\"src\":recording.blobUrl,\"controls\":\"true\"}})]),_c('div',[_vm._v(\"\\n                size: \"+_vm._s(_vm._f(\"fileSizeToHumanSize\")(recording.size))+\", type: \"+_vm._s(recording.mimeType)+\"\\n              \")])])])],1)],1),(idx !== (_vm.recordings.length-1))?_c('v-divider'):_vm._e()],1)})],2):_vm._e(),_c('v-layout',{staticClass:\"mt-5\",attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',[_vm._v(\"Notes\\n      \"),_c('small',[_vm._v(\"(as of iOS 11.2.6)\")])]),_c('v-divider'),_c('p',[_vm._v(\"\\n      There are multiple valid ways to do audio recording and playback on every browser/device combination\\n      \"),_c('i',[_vm._v(\"except\")]),_vm._v(\" iOS/Safari. I believe there are four significant issues, and only the first one seems to be well\\n      known.\\n    \")]),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('strong',[_vm._v(\"Security context of the getUserMedia handler is important\")]),_vm._v(\" - \"),_c('br'),_c('p',[_vm._v(\"\\n            The most common and widely known issue issue is that the success handler of the getUserMedia is no longer\\n            in the context of the user click. As a result, any audio context and processors created in the handler\\n            won't work. The solution is to create the audio context and any processors before calling getUserMedia,\\n            while still in the user click handler context. Then once getUserMedia provides the stream,\\n            use the previously created constructs to setup the graph and start recording.\\n          \")])]),_c('li',[_c('strong',[_vm._v(\"Multiple recordings require new audio streams\")]),_vm._v(\" - \"),_c('br'),_c('p',[_vm._v(\"\\n            There are a number of demos that work for the first recording on iOS/Safari, that then fail with empty\\n            audio on subsequent recordings until page is reloaded. The reason is that after stopping recording and\\n            extracting playable blob, the next recording requires a new AudioStream. This AudioStream can come\\n            from another call to getUserMedia (which won't prompt user after the first time), or potentially, by\\n            cloning the existing audio stream.\\n          \")])]),_c('li',[_c('strong',[_vm._v(\"Red recording bar indicator\")]),_vm._v(\" - \"),_c('br'),_c('p',[_vm._v(\"\\n            After granting permission to microphone, iOS/Safari will show a red bar notification anytime user switches\\n            away from the tab where permission was granted. To clear this bar, the recording stream's tracks can be\\n            stopped after recording is finished. This can be tested with the checkbox above. Stopping the tracks and\\n            closing the audio context is straightforward and works well, except for this last issue (but see updates):\\n          \")])]),_c('li',[_c('strong',[_c('del',[_vm._v(\"A sleep/lock/switch event can easily break things, is not detectable, and is not easily\\n            recoverable\\n          \")])]),_vm._v(\" - \"),_c('br'),_c('del',[_c('p',[_vm._v(\"\\n              To see this, make a recording and verify it plays. Switch to mail app, then back to safari and\\n              make/verify\\n              another recording. As long as red bar/microphone is still visible, it generally works. Then, check the\\n              option to stop tracks and close audio context. Make another recording and verify. Switch to mail app and\\n              back and try to make another recording. Most of the time the recording will appear to work, but the\\n              audio\\n              will be silent. As far as I can tell, there is no way to detect this, and there is no way to recover\\n              without loading a new tab or force quitting Safari.\\n            \")]),_c('p',[_c('em',[_vm._v(\"If\")]),_vm._v(\" the tracks are not stopped and so the red bar/icon remains, then this occurs much less\\n              frequently. Of course, that means the red bar is constantly visible though. And even then, starting\\n              another app that uses the microphone will almost always break things again. I have not been able to find\\n              a\\n              way to detect, much less, programmatically fix things, when this occurs. My assumption is that the\\n              underlying issue is due to low level iOS/Safari bugs, and not in how this code is setting things up.\")])])]),_c('li',[_c('strong',[_vm._v(\"Any references not cleaned up after recording complete can affect stability\")]),_vm._v(\" - \"),_c('br'),_vm._v(\"\\n          UPDATED 2018-04-10: After writing the previous section, I rewrote a number of things and removed all\\n          dependencies. By doing that I was able to ensure that everything gets cleaned up when recording is\\n          complete. I now no longer have stability issues on iOS, though I don't know exactly what was causing\\n          it previously. I thought perhaps it was the web worker, which I now close when recording is complete. But\\n          quick testing shows that even if I don't close the webworker, this new handling seems to be stable after\\n          sleep/lock/switch events.\\n        \")])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Source\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test1.vue\"}},[_vm._v(\"src/views/Test1.vue\")]),_c('ul',{staticClass:\"ml-3\"},[_c('li',[_vm._v(\"Primarily: \"),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\"}},[_vm._v(\"src/shared/RecorderService.js\")])])])])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Relevant\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/muaz-khan/RecordRTC/issues/324\"}},[_vm._v(\"https://github.com/muaz-khan/RecordRTC/issues/324\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/ai/audio-recorder-polyfill/issues/4\"}},[_vm._v(\"https://github.com/ai/audio-recorder-polyfill/issues/4\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/danielstorey/webrtc-audio-recording\"}},[_vm._v(\"https://github.com/danielstorey/webrtc-audio-recording\")])])])])],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6e709d33\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Test1.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6e709d33\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Test1.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Test1.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Test1.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6e709d33\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Test1.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6e709d33\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Test1.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <v-app>\n      <v-navigation-drawer\n        fixed\n        v-model=\"drawer\"\n        temporary\n        app>\n        <v-list dense>\n          <v-list-tile to=\"/\">\n            <v-list-tile-action>\n              <v-icon>home</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>Home</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n          <v-list-tile to=\"/diagnostics\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>Diagnostics</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n          <v-list-tile to=\"/test1\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>1 - Repeatable Audio Recording</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n\n           <v-list-tile to=\"/test2\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>2 - Processing &amp; Manipulation</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n\n          <v-list-tile to=\"/test3\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>3 - Processors w/ Peak Levels</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n\n          <v-list-tile to=\"/test4\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>4 - Microphone Selection</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n          <!--\n                   <v-list-tile to=\"/test4\">\n                     <v-list-tile-action>\n                       <v-icon>mic</v-icon>\n                     </v-list-tile-action>\n                     <v-list-tile-content>\n                       <v-list-tile-title>4 - With In-Browser Encoding</v-list-tile-title>\n                     </v-list-tile-content>\n                   </v-list-tile>\n                   <v-list-tile to=\"/test5\">\n                     <v-list-tile-action>\n                       <v-icon>file_upload</v-icon>\n                     </v-list-tile-action>\n                     <v-list-tile-content>\n                       <v-list-tile-title>5 - Upload to S3</v-list-tile-title>\n                     </v-list-tile-content>\n                   </v-list-tile>\n         -->\n          <v-list-tile href=\"https://github.com/kaliatech/web-audio-recording-tests\">\n            <v-list-tile-action>\n              <v-icon>code</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>View on Github</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n        </v-list>\n      </v-navigation-drawer>\n      <v-toolbar color=\"grey\" dark fixed app>\n        <v-toolbar-side-icon @click.stop=\"drawer = !drawer\"></v-toolbar-side-icon>\n        <v-toolbar-title>Web Audio Recording Tests</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <a href=\"https://github.com/kaliatech/web-audio-recording-tests\">\n        <v-icon large>code</v-icon>\n        </a>\n      </v-toolbar>\n      <v-content>\n        <v-container fluid class=\"scroll-container\">\n          <div mb-5>\n            <router-view></router-view>\n          </div>\n        </v-container>\n      </v-content>\n    </v-app>\n  </div>\n</template>\n\n<script>\nimport Test1 from './views/Test1.vue'\n\nexport default {\n  name: 'app',\n  components: {\n    Test1\n  },\n  data: () => ({\n    drawer: false\n  })\n}\n</script>\n\n<style lang=\"styl\">\\\n@import './styles/app.styl';\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('v-app',[_c('v-navigation-drawer',{attrs:{\"fixed\":\"\",\"temporary\":\"\",\"app\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-list',{attrs:{\"dense\":\"\"}},[_c('v-list-tile',{attrs:{\"to\":\"/\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"home\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"Home\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/diagnostics\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"Diagnostics\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/test1\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"1 - Repeatable Audio Recording\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/test2\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"2 - Processing & Manipulation\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/test3\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"3 - Processors w/ Peak Levels\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/test4\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"4 - Microphone Selection\")])],1)],1),_c('v-list-tile',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"code\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"View on Github\")])],1)],1)],1)],1),_c('v-toolbar',{attrs:{\"color\":\"grey\",\"dark\":\"\",\"fixed\":\"\",\"app\":\"\"}},[_c('v-toolbar-side-icon',{on:{\"click\":function($event){$event.stopPropagation();_vm.drawer = !_vm.drawer}}}),_c('v-toolbar-title',[_vm._v(\"Web Audio Recording Tests\")]),_c('v-spacer'),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests\"}},[_c('v-icon',{attrs:{\"large\":\"\"}},[_vm._v(\"code\")])],1)],1),_c('v-content',[_c('v-container',{staticClass:\"scroll-container\",attrs:{\"fluid\":\"\"}},[_c('div',{attrs:{\"mb-5\":\"\"}},[_c('router-view')],1)])],1)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-19da5e17\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-19da5e17\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <v-container>\n    <v-layout row wrap>\n      <v-flex md3>\n      </v-flex>\n      <v-flex md6>\n        <div class=\"text-xs-center home--menu\">\n          <p>\n            Tests to verify functionality of web audio <strong>recording</strong> across all browsers. Particularly on iOS/Safari 11.2.x as it\n            is very strict on security context and has <del>bugs</del>\n            <em>special features</em>.\n          </p>\n\n          <div>\n            <v-btn color=\"info\" to=\"/diagnostics\">Browser Diagnostics</v-btn>\n          </div>\n          <div>\n            <v-btn color=\"info\" to=\"/test1\">1 - Repeatable Audio Recording</v-btn>\n          </div>\n          <div>\n            <v-btn color=\"info\" to=\"/test2\">2 - Processing &amp; Manipulation</v-btn>\n          </div>\n          <div>\n            <v-btn color=\"info\" to=\"/test3\">3 - Processors w/ Peak Levels</v-btn>\n          </div>\n          <div>\n            <v-btn color=\"info\" to=\"/test4\">4 - Microphone Selection</v-btn>\n          </div>\n          <!--\n                    <div>\n                      <v-btn color=\"info\" to=\"/test5\">5 - In-Browser Encoding</v-btn>\n                    </div>\n                    <div>\n                      <v-btn color=\"info\" to=\"/test6\">6 - Upload to S3</v-btn>\n                    </div>\n          -->\n        </div>\n      </v-flex>\n      <v-flex md3>\n      </v-flex>\n\n    </v-layout>\n  </v-container>\n</template>\n<script>\nexport default {\n  name: 'Home',\n  components: {},\n  data () {\n    return {}\n  }\n}\n</script>\n<style lang=\"stylus\">\n  .home--menu\n    button, a.btn\n      width: 20em\n\n  .home--menu .btn__content\n    justify-content: normal\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"md3\":\"\"}}),_c('v-flex',{attrs:{\"md6\":\"\"}},[_c('div',{staticClass:\"text-xs-center home--menu\"},[_c('p',[_vm._v(\"\\n          Tests to verify functionality of web audio \"),_c('strong',[_vm._v(\"recording\")]),_vm._v(\" across all browsers. Particularly on iOS/Safari 11.2.x as it\\n          is very strict on security context and has \"),_c('del',[_vm._v(\"bugs\")]),_c('em',[_vm._v(\"special features\")]),_vm._v(\".\\n        \")]),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/diagnostics\"}},[_vm._v(\"Browser Diagnostics\")])],1),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/test1\"}},[_vm._v(\"1 - Repeatable Audio Recording\")])],1),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/test2\"}},[_vm._v(\"2 - Processing & Manipulation\")])],1),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/test3\"}},[_vm._v(\"3 - Processors w/ Peak Levels\")])],1),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/test4\"}},[_vm._v(\"4 - Microphone Selection\")])],1)])]),_c('v-flex',{attrs:{\"md3\":\"\"}})],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-36272f3c\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Home.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Home.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-36272f3c\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Home.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"mb-3\">\n    <v-layout row>\n      <h2>Browser Diagnostics</h2>\n    </v-layout>\n\n    <v-layout row class=\"mt-3 mb-3\">\n      <h4>Web Audio Recording Support</h4>\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\">\n      <v-flex xs12>\n        <ul>\n          <li><span class=\"lbl\">AudioContext</span> : <span class=\"val\">{{ audioContextStr }}</span></li>\n          <li><span class=\"lbl\">webkitAudioContext</span> : <span class=\"val\">{{ webkitAudioContextStr }}</span>\n          <li><span class=\"lbl\">MediaRecorder</span> : <span class=\"val\">{{ mediaRecorderOrigStr }}</span>\n          <li><span class=\"lbl\">MediaRecorder(Polyfilled)</span> : <span\n            class=\"val\">{{ mediaRecorderPolyfilled }}</span>\n          </li>\n        </ul>\n      </v-flex>\n    </v-layout>\n\n    <v-layout row class=\"mt-3\">\n      <h4>Audio Input Devices</h4>\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\">\n      <v-flex sm6 v-for=\"name in availableDeviceNames\" v-bind:key=\"name\">\n        <div class=\"lbl\">{{name}}</div>\n      </v-flex>\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\" v-if=\"enumeratedDevicesPermissionNeeded\">\n      <v-btn @click=\"requestDevicePermissions\">Request Default Device Permission</v-btn>\n    </v-layout>\n    <v-layout row wrap class=\"ml-5\" v-if=\"enumeratedDevicesPermissionNeeded\">\n      Needed to get device labels\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\" v-if=\"enumeratedDevicesPermissionRevokable\">\n      <v-btn @click=\"revokeDevicePermissions\">Revoke Default Device Permission</v-btn>\n    </v-layout>\n\n    <v-layout row class=\"mt-3\">\n      <h4>Supported Device Constraints</h4>\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\">\n      <span v-for=\"deviceConstraint in supportedDeviceConstraints\" v-bind:key=\"deviceConstraint\" class=\"lbl\">{{ deviceConstraint }}</span>\n    </v-layout>\n\n    <v-layout row class=\"mt-3\">\n      <h4>Supported MediaRecorder Mime Types</h4>\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\">\n      <v-flex xs12>\n        <ul>\n          <li v-for=\"mimetype in supportedMimeTypes\" v-bind:key=\"mimetype.name\">\n            <span class=\"lbl\">{{ mimetype.name }}</span> : <span class=\"val\">{{ mimetype.supported }}</span>\n          </li>\n        </ul>\n      </v-flex>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only mt-3>\n      <h4>References</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li><a\n            href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API\">https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API</a>\n          </li>\n          <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\">https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API</a>\n          </li>\n          <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API\">https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API</a>\n          </li>\n          <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices\">https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices</a>\n          </li>\n          <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API\">https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API</a>\n          </li>\n          <li><a href=\"https://www.w3.org/TR/webaudio/\">https://www.w3.org/TR/webaudio/</a></li>\n        </ul>\n        <br>\n        <ul>\n          <li><a href=\"https://webrtc.github.io/samples/\">https://webrtc.github.io/samples/</a></li>\n          <li><a href=\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\">https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/</a>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Diagnostics',\n  data () {\n    return {\n      availableDeviceNames: [],\n      enumeratedDevices: [],\n      enumeratedDevicesPermissionNeeded: false,\n      enumeratedDevicesPermissionRevokable: false,\n      supportedMimeTypes: [],\n      mediaRecorderOrigStr: typeof window.MediaRecorder,\n      mediaRecorderPolyfilled: 'false',\n      supportedDeviceConstraints: []\n    }\n  },\n  computed: {\n    audioContextStr () {\n      // var AudioContext = window.AudioContext || window.webkitAudioContext;\n      // var audioCtx = new AudioContext();\n      return typeof window.AudioContext\n    },\n    webkitAudioContextStr () {\n      return typeof window.webkitAudioContext\n    }\n  },\n  created () {\n    const types = [\n      'audio/aac',\n      'audio/mp4',\n      'audio/mpeg',\n      'audio/vorbis',\n      'audio/wav',\n      'audio/webm',\n      'audio/webm;codecs=opus',\n      'audio/x-wav',\n      'audio/wav',\n\n      'video/quicktime',\n      'video/webm',\n      'video/webm;codecs=vp8',\n      'video/webm;codecs=vp9',\n      'video/webm;codecs=h264',\n      'video/mp4']\n\n    if (typeof MediaRecorder === 'undefined' || !MediaRecorder.isTypeSupported) {\n      this.supportedMimeTypes.push({name: 'audio/x-wav', supported: '(manual encoding)'})\n    }\n    else {\n      for (const i in types) {\n        if (MediaRecorder.isTypeSupported(types[i])) {\n          this.supportedMimeTypes.push({name: types[i], supported: MediaRecorder.isTypeSupported(types[i])})\n        }\n      }\n    }\n\n    // Listed without labels until permission is granted to at least one device\n    this.enumerateDevices()\n\n    const supportedConstraints = navigator.mediaDevices.getSupportedConstraints()\n    for (let constraint in supportedConstraints) {\n      if (supportedConstraints.hasOwnProperty(constraint) && supportedConstraints[constraint] === true) {\n        this.supportedDeviceConstraints.push(constraint)\n      }\n    }\n  },\n  methods: {\n    setupAvailDeviceNames () {\n      let availDevices = []\n      this.enumeratedDevices.forEach((device, idx) => {\n        // console.log(device)\n        if (device.kind === 'audioinput') {\n          if (!device.label) {\n            this.enumeratedDevicesPermissionNeeded = true\n            availDevices.push('Input ' + idx + ' (' + device.deviceId.substr(0, 15) + ')')\n          }\n          else {\n            availDevices.push(device.label.substr(0, 25))\n          }\n        }\n      })\n      this.availableDeviceNames = availDevices\n    },\n    enumerateDevices () {\n      navigator.mediaDevices.enumerateDevices()\n        .then((devices) => {\n          this.enumeratedDevices = devices\n          this.setupAvailDeviceNames()\n        })\n        .catch((error) => {\n          console.log(error)\n          this.enumeratedDevices.push({id: '-', kind: 'error', deviceId: 'error'})\n        })\n    },\n    requestDevicePermissions () {\n      // this.enumeratedDevices.forEach((device) => {\n      // })\n      navigator.mediaDevices.getUserMedia({audio: true, deviceId: 'default'})\n        .then((stream) => {\n          this.enumerateDevices()\n          this.enumeratedDevicesPermissionNeeded = false\n          this.enumeratedDevicesPermissionRevokable = true\n          this.stream = stream\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    },\n    revokeDevicePermissions () {\n      if (this.stream) {\n        this.stream.getTracks().forEach((track) => track.stop())\n        this.stream = null\n      }\n      this.enumeratedDevicesPermissionNeeded = true\n      this.enumeratedDevicesPermissionRevokable = false\n      this.enumerateDevices()\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .lbl {\n    display: inline-block;\n    width: 15em;\n  }\n\n  .val {\n    margin-left: 1em;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Diagnostics.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mb-3\"},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('h2',[_vm._v(\"Browser Diagnostics\")])]),_c('v-layout',{staticClass:\"mt-3 mb-3\",attrs:{\"row\":\"\"}},[_c('h4',[_vm._v(\"Web Audio Recording Support\")])]),_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('ul',[_c('li',[_c('span',{staticClass:\"lbl\"},[_vm._v(\"AudioContext\")]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(_vm.audioContextStr))])]),_c('li',[_c('span',{staticClass:\"lbl\"},[_vm._v(\"webkitAudioContext\")]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(_vm.webkitAudioContextStr))])]),_c('li',[_c('span',{staticClass:\"lbl\"},[_vm._v(\"MediaRecorder\")]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(_vm.mediaRecorderOrigStr))])]),_c('li',[_c('span',{staticClass:\"lbl\"},[_vm._v(\"MediaRecorder(Polyfilled)\")]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(_vm.mediaRecorderPolyfilled))])])])])],1),_c('v-layout',{staticClass:\"mt-3\",attrs:{\"row\":\"\"}},[_c('h4',[_vm._v(\"Audio Input Devices\")])]),_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.availableDeviceNames),function(name){return _c('v-flex',{key:name,attrs:{\"sm6\":\"\"}},[_c('div',{staticClass:\"lbl\"},[_vm._v(_vm._s(name))])])})),(_vm.enumeratedDevicesPermissionNeeded)?_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-btn',{on:{\"click\":_vm.requestDevicePermissions}},[_vm._v(\"Request Default Device Permission\")])],1):_vm._e(),(_vm.enumeratedDevicesPermissionNeeded)?_c('v-layout',{staticClass:\"ml-5\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_vm._v(\"\\n    Needed to get device labels\\n  \")]):_vm._e(),(_vm.enumeratedDevicesPermissionRevokable)?_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-btn',{on:{\"click\":_vm.revokeDevicePermissions}},[_vm._v(\"Revoke Default Device Permission\")])],1):_vm._e(),_c('v-layout',{staticClass:\"mt-3\",attrs:{\"row\":\"\"}},[_c('h4',[_vm._v(\"Supported Device Constraints\")])]),_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.supportedDeviceConstraints),function(deviceConstraint){return _c('span',{key:deviceConstraint,staticClass:\"lbl\"},[_vm._v(_vm._s(deviceConstraint))])})),_c('v-layout',{staticClass:\"mt-3\",attrs:{\"row\":\"\"}},[_c('h4',[_vm._v(\"Supported MediaRecorder Mime Types\")])]),_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('ul',_vm._l((_vm.supportedMimeTypes),function(mimetype){return _c('li',{key:mimetype.name},[_c('span',{staticClass:\"lbl\"},[_vm._v(_vm._s(mimetype.name))]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(mimetype.supported))])])}))])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\",\"mt-3\":\"\"}},[_c('h4',[_vm._v(\"References\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API\"}},[_vm._v(\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\"}},[_vm._v(\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API\"}},[_vm._v(\"https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices\"}},[_vm._v(\"https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API\"}},[_vm._v(\"https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://www.w3.org/TR/webaudio/\"}},[_vm._v(\"https://www.w3.org/TR/webaudio/\")])])]),_c('br'),_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://webrtc.github.io/samples/\"}},[_vm._v(\"https://webrtc.github.io/samples/\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\"}},[_vm._v(\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\")])])])])],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2fdc6ef4\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Diagnostics.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2fdc6ef4\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Diagnostics.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Diagnostics.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Diagnostics.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2fdc6ef4\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Diagnostics.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2fdc6ef4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Diagnostics.vue\n// module id = null\n// module chunks = ","<template>\n  <v-container mb-5>\n    <v-layout row wrap>\n      <div class=\"test2\">\n        <h3>Test 2\n          <span v-if=\"$vuetify.breakpoint.xsOnly\"><br></span>\n          <span v-if=\"!$vuetify.breakpoint.xsOnly\"> - </span>\n          Recording Processing &amp; Manipulation\n        </h3>\n\n        <h3></h3>\n        <p>Manual processing and manipulation of the recording audio stream.</p>\n        <div>\n          <v-btn @click=\"startRecording\" :disabled=\"recordingInProgress\">Start Recording\n          </v-btn>\n          <v-btn @click=\"stopRecording\" :disabled=\"!recordingInProgress\">Stop Recording</v-btn>\n          <v-icon :class=\"recordingInProgress ? 'live' : ''\">mic</v-icon>\n        </div>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap>\n      <div id=\"audioProcessDiv\" ref=\"audioProcessDiv\" class=\"ml-2\">\n        Samples Received: {{ numAudioSamples }}\n      </div>\n    </v-layout>\n\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-checkbox v-model=\"addNoise\"\n                  label=\"Add noise (dynamic)\"></v-checkbox>\n    </v-layout>\n\n    <v-layout column wrap v-if=\"recordings.length > 0\">\n      <h4 class=\"mt-3\">Recordings</h4>\n      <div v-for=\"(recording,idx) in recordings\" :key=\"recording.ts\">\n        <v-card>\n          <v-card-title primary-title>\n            <v-layout column wrap>\n              <div>\n                <h3>Recording #{{ idx + 1 }}</h3>\n              </div>\n              <div class=\"ml-3\">\n                <div>\n                  <audio :src=\"recording.blobUrl\" controls=\"true\"/>\n                </div>\n                <div>\n                  size: {{recording.size | fileSizeToHumanSize}}, type: {{recording.mimeType}}\n                </div>\n              </div>\n            </v-layout>\n          </v-card-title>\n        </v-card>\n        <v-divider v-if=\"idx !== (recordings.length-1)\"/>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap>\n      <h4 class=\"mt-3\">Source</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li><a href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test2.vue\">src/views/Test2.vue</a>\n            <ul class=\"ml-3\">\n              <li>Primarily: <a\n                href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\">src/shared/RecorderService.js</a>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only>\n      <h4 class=\"mt-3\">Relevant</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li><a href=\"https://github.com/muaz-khan/RecordRTC/issues/324\">https://github.com/muaz-khan/RecordRTC/issues/324</a>\n          </li>\n          <li><a href=\"https://github.com/ai/audio-recorder-polyfill/issues/4\">https://github.com/ai/audio-recorder-polyfill/issues/4</a>\n          </li>\n          <li><a href=\"https://github.com/danielstorey/webrtc-audio-recording\">https://github.com/danielstorey/webrtc-audio-recording</a>\n          </li>\n          <li><a href=\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\">https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/</a>\n          </li>\n          <ul>\n            <li><a href=\"https://github.com/MicrosoftEdge/Demos/blob/master/microphone\">https://github.com/MicrosoftEdge/Demos/blob/master/microphone</a>\n            </li>\n          </ul>\n        </ul>\n      </div>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport RecorderService from '@/shared/RecorderService'\nimport utils from '@/shared/Utils'\n\nexport default {\n  name: 'Test1',\n  filters: {\n    fileSizeToHumanSize (val) {\n      return utils.humanFileSize(val, true)\n    }\n  },\n  data () {\n    return {\n      recordingInProgress: false,\n      supportedMimeTypes: [],\n      recordings: [],\n      cleanupWhenFinished: true,\n      addNoise: false,\n      numAudioSamples: 0\n    }\n  },\n  created () {\n    this.recorderSrvc = new RecorderService()\n    this.recorderSrvc.em.addEventListener('recording', (evt) => this.onNewRecording(evt))\n    this.recorderSrvc.em.addEventListener('onaudioprocess', (evt) => this.onAudioProcess(evt))\n    this.recorderSrvc.config.broadcastAudioProcessEvents = true\n  },\n  mounted () {\n  },\n  methods: {\n    startRecording () {\n      this.numAudioSamples = 0\n      this.recorderSrvc.startRecording()\n        .then(() => {\n          this.recordingInProgress = true\n        })\n        .catch((error) => {\n          console.error('Exception while start recording: ' + error)\n          alert('Exception while start recording: ' + error.message)\n        })\n    },\n    stopRecording () {\n      this.recorderSrvc.stopRecording()\n      this.recordingInProgress = false\n    },\n    onAudioProcess (e) {\n      this.numAudioSamples++\n\n      let inputBuffer = e.detail.inputBuffer\n      let outputBuffer = e.detail.outputBuffer\n\n      for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {\n        let inputData = inputBuffer.getChannelData(channel)\n        let outputData = outputBuffer.getChannelData(channel)\n\n        // Each sample\n        for (let sample = 0; sample < inputBuffer.length; sample++) {\n          if (this.addNoise) {\n            outputData[sample] = (inputData[sample] + (Math.random() * 0.02))\n          }\n          else {\n            outputData[sample] = inputData[sample]\n          }\n        }\n      }\n    },\n    onNewRecording (evt) {\n      this.recordings.push(evt.detail.recording)\n    }\n\n  }\n}\n</script>\n<style lang=\"stylus\" scoped=\"true\">\n  @import '~vuetify/src/stylus/settings/_variables'\n  @media screen and (min-width: $grid-breakpoints.sm)\n    audio\n      width 35em\n\n  @media screen and (max-width: ($grid-breakpoints.sm - 1))\n    audio\n      width 100%\n\n  .live\n    color red\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Test2.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"mb-5\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',{staticClass:\"test2\"},[_c('h3',[_vm._v(\"Test 2\\n        \"),(_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_c('br')]):_vm._e(),(!_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_vm._v(\" - \")]):_vm._e(),_vm._v(\"\\n        Recording Processing & Manipulation\\n      \")]),_c('h3'),_c('p',[_vm._v(\"Manual processing and manipulation of the recording audio stream.\")]),_c('div',[_c('v-btn',{attrs:{\"disabled\":_vm.recordingInProgress},on:{\"click\":_vm.startRecording}},[_vm._v(\"Start Recording\\n        \")]),_c('v-btn',{attrs:{\"disabled\":!_vm.recordingInProgress},on:{\"click\":_vm.stopRecording}},[_vm._v(\"Stop Recording\")]),_c('v-icon',{class:_vm.recordingInProgress ? 'live' : ''},[_vm._v(\"mic\")])],1)])]),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',{ref:\"audioProcessDiv\",staticClass:\"ml-2\",attrs:{\"id\":\"audioProcessDiv\"}},[_vm._v(\"\\n      Samples Received: \"+_vm._s(_vm.numAudioSamples)+\"\\n    \")])]),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-checkbox',{attrs:{\"label\":\"Add noise (dynamic)\"},model:{value:(_vm.addNoise),callback:function ($$v) {_vm.addNoise=$$v},expression:\"addNoise\"}})],1),(_vm.recordings.length > 0)?_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recordings\")]),_vm._l((_vm.recordings),function(recording,idx){return _c('div',{key:recording.ts},[_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',[_c('h3',[_vm._v(\"Recording #\"+_vm._s(idx + 1))])]),_c('div',{staticClass:\"ml-3\"},[_c('div',[_c('audio',{attrs:{\"src\":recording.blobUrl,\"controls\":\"true\"}})]),_c('div',[_vm._v(\"\\n                size: \"+_vm._s(_vm._f(\"fileSizeToHumanSize\")(recording.size))+\", type: \"+_vm._s(recording.mimeType)+\"\\n              \")])])])],1)],1),(idx !== (_vm.recordings.length-1))?_c('v-divider'):_vm._e()],1)})],2):_vm._e(),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Source\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test2.vue\"}},[_vm._v(\"src/views/Test2.vue\")]),_c('ul',{staticClass:\"ml-3\"},[_c('li',[_vm._v(\"Primarily: \"),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\"}},[_vm._v(\"src/shared/RecorderService.js\")])])])])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Relevant\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/muaz-khan/RecordRTC/issues/324\"}},[_vm._v(\"https://github.com/muaz-khan/RecordRTC/issues/324\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/ai/audio-recorder-polyfill/issues/4\"}},[_vm._v(\"https://github.com/ai/audio-recorder-polyfill/issues/4\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/danielstorey/webrtc-audio-recording\"}},[_vm._v(\"https://github.com/danielstorey/webrtc-audio-recording\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\"}},[_vm._v(\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\")])]),_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/MicrosoftEdge/Demos/blob/master/microphone\"}},[_vm._v(\"https://github.com/MicrosoftEdge/Demos/blob/master/microphone\")])])])])])],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8e94d004\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Test2.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8e94d004\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Test2.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Test2.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Test2.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8e94d004\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Test2.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-8e94d004\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Test2.vue\n// module id = null\n// module chunks = ","/**\n * Copied from https://github.com/esonderegger/web-audio-peak-meter\n * Modified to class form to allow multiple instances on a page.\n */\nexport default class WebAudioPeakMeter {\n  constructor () {\n    this.options = {\n      borderSize: 2,\n      fontSize: 9,\n      backgroundColor: 'black',\n      tickColor: '#ddd',\n      gradient: ['red 1%', '#ff0 16%', 'lime 45%', '#080 100%'],\n      dbRange: 48,\n      dbTickSize: 6,\n      maskTransition: 'height 0.1s'\n    }\n\n    // this.tickWidth\n    // this.elementWidth\n    // this.elementHeight\n    // this.meterHeight\n    // this.meterWidth\n    // this.meterTop\n    this.vertical = true\n    this.channelCount = 1\n    this.channelMasks = []\n    this.channelPeaks = []\n    this.channelPeakLabels = []\n  }\n\n  getBaseLog = function (x, y) {\n    return Math.log(y) / Math.log(x)\n  }\n\n  dbFromFloat = function (floatVal) {\n    return this.getBaseLog(10, floatVal) * 20\n  }\n\n  setOptions = function (userOptions) {\n    for (var k in userOptions) {\n      this.options[k] = userOptions[k]\n    }\n    this.tickWidth = this.options.fontSize * 2.0\n    this.meterTop = this.options.fontSize * 1.5 + this.options.borderSize\n  }\n\n  createMeterNode = function (sourceNode, audioCtx) {\n    var c = sourceNode.channelCount\n    var meterNode = audioCtx.createScriptProcessor(2048, c, c)\n    sourceNode.connect(meterNode)\n    meterNode.connect(audioCtx.destination)\n    return meterNode\n  }\n\n  createContainerDiv = function (parent) {\n    var meterElement = document.createElement('div')\n    meterElement.style.position = 'relative'\n    meterElement.style.width = this.elementWidth + 'px'\n    meterElement.style.height = this.elementHeight + 'px'\n    meterElement.style.backgroundColor = this.options.backgroundColor\n    parent.appendChild(meterElement)\n    return meterElement\n  }\n\n  createMeter = function (domElement, meterNode, optionsOverrides) {\n    this.setOptions(optionsOverrides)\n    this.elementWidth = domElement.clientWidth\n    this.elementHeight = domElement.clientHeight\n    var meterElement = this.createContainerDiv(domElement)\n    if (this.elementWidth > this.elementHeight) {\n      this.vertical = false\n    }\n    this.meterHeight = this.elementHeight - this.meterTop - this.options.borderSize\n    this.meterWidth = this.elementWidth - this.tickWidth - this.options.borderSize\n    this.createTicks(meterElement)\n    this.createRainbow(meterElement, this.meterWidth, this.meterHeight,\n      this.meterTop, this.tickWidth)\n    this.channelCount = meterNode.channelCount\n    var channelWidth = this.meterWidth / this.channelCount\n    var channelLeft = this.tickWidth\n    for (var i = 0; i < this.channelCount; i++) {\n      this.createChannelMask(meterElement, this.options.borderSize,\n        this.meterTop, channelLeft, false)\n      this.channelMasks[i] = this.createChannelMask(meterElement, channelWidth,\n        this.meterTop, channelLeft,\n        this.options.maskTransition)\n      this.channelPeaks[i] = 0.0\n      this.channelPeakLabels[i] = this.createPeakLabel(meterElement, channelWidth,\n        channelLeft)\n      channelLeft += channelWidth\n    }\n    meterNode.onaudioprocess = (e) => this.updateMeter(e)\n    meterElement.addEventListener('click', function () {\n      for (var i = 0; i < this.channelCount; i++) {\n        this.channelPeaks[i] = 0.0\n        this.channelPeakLabels[i].textContent = '-'\n      }\n    }, false)\n  }\n\n  createTicks = function (parent) {\n    var numTicks = Math.floor(this.options.dbRange / this.options.dbTickSize)\n    var dbTickLabel = 0\n    var dbTickTop = this.options.fontSize + this.options.borderSize\n    for (var i = 0; i < numTicks; i++) {\n      var dbTick = document.createElement('div')\n      parent.appendChild(dbTick)\n      dbTick.style.width = this.tickWidth + 'px'\n      dbTick.style.textAlign = 'right'\n      dbTick.style.color = this.options.tickColor\n      dbTick.style.fontSize = this.options.fontSize + 'px'\n      dbTick.style.position = 'absolute'\n      dbTick.style.top = dbTickTop + 'px'\n      dbTick.textContent = dbTickLabel + ''\n      dbTickLabel -= this.options.dbTickSize\n      dbTickTop += this.meterHeight / numTicks\n    }\n  }\n\n  createRainbow = function (parent, width, height, top, left) {\n    var rainbow = document.createElement('div')\n    parent.appendChild(rainbow)\n    rainbow.style.width = width + 'px'\n    rainbow.style.height = height + 'px'\n    rainbow.style.position = 'absolute'\n    rainbow.style.top = top + 'px'\n    rainbow.style.left = left + 'px'\n    var gradientStyle = 'linear-gradient(' + this.options.gradient.join(', ') + ')'\n    rainbow.style.backgroundImage = gradientStyle\n    return rainbow\n  }\n\n  createPeakLabel = function (parent, width, left) {\n    var label = document.createElement('div')\n    parent.appendChild(label)\n    label.style.width = width + 'px'\n    label.style.textAlign = 'center'\n    label.style.color = this.options.tickColor\n    label.style.fontSize = this.options.fontSize + 'px'\n    label.style.position = 'absolute'\n    label.style.top = this.options.borderSize + 'px'\n    label.style.left = left + 'px'\n    label.textContent = '-'\n    return label\n  }\n\n  createChannelMask = function (parent, width, top, left, transition) {\n    var channelMask = document.createElement('div')\n    parent.appendChild(channelMask)\n    channelMask.style.width = width + 'px'\n    channelMask.style.height = this.meterHeight + 'px'\n    channelMask.style.position = 'absolute'\n    channelMask.style.top = top + 'px'\n    channelMask.style.left = left + 'px'\n    channelMask.style.backgroundColor = this.options.backgroundColor\n    if (transition) {\n      channelMask.style.transition = this.options.maskTransition\n    }\n    return channelMask\n  }\n\n  maskSize = function (floatVal) {\n    if (floatVal === 0.0) {\n      return this.meterHeight\n    }\n    else {\n      var d = this.options.dbRange * -1\n      var returnVal = Math.floor(this.dbFromFloat(floatVal) * this.meterHeight / d)\n      if (returnVal > this.meterHeight) {\n        return this.meterHeight\n      }\n      else {\n        return returnVal\n      }\n    }\n  }\n\n  updateMeter = function (audioProcessingEvent) {\n    var inputBuffer = audioProcessingEvent.inputBuffer\n    var i\n    var channelData = []\n    var channelMaxes = []\n    for (i = 0; i < this.channelCount; i++) {\n      channelData[i] = inputBuffer.getChannelData(i)\n      channelMaxes[i] = 0.0\n    }\n    for (var sample = 0; sample < inputBuffer.length; sample++) {\n      for (i = 0; i < this.channelCount; i++) {\n        if (Math.abs(channelData[i][sample]) > channelMaxes[i]) {\n          channelMaxes[i] = Math.abs(channelData[i][sample])\n        }\n      }\n    }\n    for (i = 0; i < this.channelCount; i++) {\n      var thisMaskSize = this.maskSize(channelMaxes[i], this.meterHeight)\n      this.channelMasks[i].style.height = thisMaskSize + 'px'\n      if (channelMaxes[i] > this.channelPeaks[i]) {\n        this.channelPeaks[i] = channelMaxes[i]\n        var labelText = this.dbFromFloat(this.channelPeaks[i]).toFixed(1)\n        this.channelPeakLabels[i].textContent = labelText\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/WebAudioPeakMeter.js","<template>\n  <v-container mb-5>\n    <v-layout row wrap>\n      <div class=\"test2\">\n        <h3>Test 3\n            <span v-if=\"$vuetify.breakpoint.xsOnly\"><br></span>\n            <span v-if=\"!$vuetify.breakpoint.xsOnly\"> - </span>\n            Script Processors w/ Peak Levels\n        </h3>\n        <p>Recording with multiple simultaneous script processors. In this case, showing peak levels of recording pre and post gain.</p>\n        <div>\n          <v-btn @click=\"startRecording\" :disabled=\"recordingInProgress\">Start Recording\n          </v-btn>\n          <v-btn @click=\"stopRecording\" :disabled=\"!recordingInProgress\">Stop Recording</v-btn>\n          <v-icon :class=\"recordingInProgress ? 'live' : ''\">mic</v-icon>\n        </div>\n      </div>\n    </v-layout>\n\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-flex xs10 md6>\n        <v-slider label=\"Mic Gain\" :max=\"500\" v-model=\"micGainSlider\"></v-slider>\n      </v-flex>\n      <v-flex xs2>\n        <div class=\"input-group\">\n          <label>{{ micGain }}</label>\n        </div>\n      </v-flex>\n    </v-layout>\n\n    <v-layout row wrap>\n      <h4 class=\"mt-3\">Recording Peak Meters</h4>\n    </v-layout>\n\n    <v-layout row wrap>\n      <v-flex xs6 sm2>\n        <div id=\"peak-meter-raw\" style=\"width: 5em; height: 10em; margin: 1em 0; border:1px solid gray\"></div>\n        <p>Raw</p>\n      </v-flex>\n      <v-flex xs6 sm2>\n        <div id=\"peak-meter-postgain\" style=\"width: 5em; height: 10em; margin: 1em 0;  border:1px solid gray\"></div>\n        PostGain\n      </v-flex>\n      <v-spacer></v-spacer>\n    </v-layout>\n\n    <v-layout column wrap v-if=\"recordings.length > 0\">\n      <h4 class=\"mt-3\">Recordings</h4>\n      <div v-for=\"(recording,idx) in recordings\" :key=\"recording.ts\">\n        <v-card>\n          <v-card-title primary-title>\n            <v-layout column wrap>\n              <div>\n                <h3>Recording #{{ idx + 1 }}</h3>\n              </div>\n              <div class=\"ml-3\">\n                <div>\n                  <audio :src=\"recording.blobUrl\" controls=\"true\"/>\n                </div>\n                <div>\n                  size: {{recording.size | fileSizeToHumanSize}}, type: {{recording.mimeType}}\n                </div>\n              </div>\n            </v-layout>\n          </v-card-title>\n        </v-card>\n        <v-divider v-if=\"idx !== (recordings.length-1)\"/>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap>\n      <h4 class=\"mt-3\">Source</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li><a href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test2.vue\">src/views/Test3.vue</a>\n            <ul class=\"ml-3\">\n              <li>Primarily: <a\n                href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\">src/shared/RecorderService.js</a>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only>\n      <h4 class=\"mt-3\">Relevant</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li><a href=\"https://github.com/muaz-khan/RecordRTC/issues/324\">https://github.com/muaz-khan/RecordRTC/issues/324</a>\n          </li>\n          <li><a href=\"https://github.com/ai/audio-recorder-polyfill/issues/4\">https://github.com/ai/audio-recorder-polyfill/issues/4</a>\n          </li>\n          <li><a href=\"https://github.com/danielstorey/webrtc-audio-recording\">https://github.com/danielstorey/webrtc-audio-recording</a>\n          </li>\n          <li><a href=\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\">https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/</a>\n          </li>\n          <ul>\n            <li><a href=\"https://github.com/MicrosoftEdge/Demos/blob/master/microphone\">https://github.com/MicrosoftEdge/Demos/blob/master/microphone</a>\n            </li>\n          </ul>\n          <li><a href=\"https://github.com/esonderegger/web-audio-peak-meter\">https://github.com/esonderegger/web-audio-peak-meter</a></li>\n        </ul>\n      </div>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport RecorderService from '@/shared/RecorderService'\nimport utils from '@/shared/Utils'\nimport WebAudioPeakMeter from '@/shared/WebAudioPeakMeter'\n\n// Couldn't use the original library because it doesn't support more than one instance on page due to the module structure\n// import webAudioPeakMeter from 'web-audio-peak-meter'\nlet webAudioPeakMeter1 = new WebAudioPeakMeter()\nlet webAudioPeakMeter2 = new WebAudioPeakMeter()\n\nexport default {\n  name: 'Test3',\n  filters: {\n    fileSizeToHumanSize (val) {\n      return utils.humanFileSize(val, true)\n    }\n  },\n  data () {\n    return {\n      micGainSlider: 100,\n      micGain: 1.0,\n      recordingInProgress: false,\n      supportedMimeTypes: [],\n      recordings: [],\n      cleanupWhenFinished: true\n    }\n  },\n  watch: {\n    micGainSlider () {\n      this.micGain = (this.micGainSlider * 0.01).toFixed(2)\n      this.recorderSrvc.setMicGain(this.micGain)\n    }\n  },\n  created () {\n    this.recorderSrvc = new RecorderService()\n    this.recorderSrvc.em.addEventListener('recording', (evt) => this.onNewRecording(evt))\n    this.recorderSrvc.onGraphSetupWithInputStream = (inputStreamNode) => {\n      this.meterNodeRaw = webAudioPeakMeter1.createMeterNode(inputStreamNode, this.recorderSrvc.audioCtx)\n      webAudioPeakMeter1.createMeter(this.peakMeterRawEl, this.meterNodeRaw, {})\n    }\n  },\n  mounted () {\n    this.peakMeterRawEl = document.getElementById('peak-meter-raw')\n    this.peakMeterPostGainEl = document.getElementById('peak-meter-postgain')\n  },\n  methods: {\n    startRecording () {\n      this.recorderSrvc.startRecording()\n        .then(() => {\n          this.recordingInProgress = true\n\n          this.meterNodePostGain = webAudioPeakMeter2.createMeterNode(this.recorderSrvc.micGainNode, this.recorderSrvc.audioCtx)\n          webAudioPeakMeter2.createMeter(this.peakMeterPostGainEl, this.meterNodePostGain, {})\n        })\n        .catch((error) => {\n          console.error('Exception while start recording: ' + error)\n          alert('Exception while start recording: ' + error.message)\n        })\n    },\n    stopRecording () {\n      this.recorderSrvc.stopRecording()\n      this.recordingInProgress = false\n\n      this.meterNodeRaw.disconnect()\n      this.meterNodeRaw = null\n      this.peakMeterRawEl.innerHTML = ''\n\n      this.meterNodePostGain.disconnect()\n      this.meterNodePostGain = null\n      this.peakMeterPostGainEl.innerHTML = ''\n    },\n    onNewRecording (evt) {\n      this.recordings.push(evt.detail.recording)\n    }\n  }\n}\n</script>\n<style lang=\"stylus\" scoped=\"true\">\n  @import '~vuetify/src/stylus/settings/_variables'\n  @media screen and (min-width: $grid-breakpoints.sm)\n    audio\n      width 35em\n\n  @media screen and (max-width: ($grid-breakpoints.sm - 1))\n    audio\n      width 100%\n\n  .live\n    color red\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Test3.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"mb-5\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',{staticClass:\"test2\"},[_c('h3',[_vm._v(\"Test 3\\n          \"),(_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_c('br')]):_vm._e(),(!_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_vm._v(\" - \")]):_vm._e(),_vm._v(\"\\n          Script Processors w/ Peak Levels\\n      \")]),_c('p',[_vm._v(\"Recording with multiple simultaneous script processors. In this case, showing peak levels of recording pre and post gain.\")]),_c('div',[_c('v-btn',{attrs:{\"disabled\":_vm.recordingInProgress},on:{\"click\":_vm.startRecording}},[_vm._v(\"Start Recording\\n        \")]),_c('v-btn',{attrs:{\"disabled\":!_vm.recordingInProgress},on:{\"click\":_vm.stopRecording}},[_vm._v(\"Stop Recording\")]),_c('v-icon',{class:_vm.recordingInProgress ? 'live' : ''},[_vm._v(\"mic\")])],1)])]),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs10\":\"\",\"md6\":\"\"}},[_c('v-slider',{attrs:{\"label\":\"Mic Gain\",\"max\":500},model:{value:(_vm.micGainSlider),callback:function ($$v) {_vm.micGainSlider=$$v},expression:\"micGainSlider\"}})],1),_c('v-flex',{attrs:{\"xs2\":\"\"}},[_c('div',{staticClass:\"input-group\"},[_c('label',[_vm._v(_vm._s(_vm.micGain))])])])],1),_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recording Peak Meters\")])]),_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\",\"sm2\":\"\"}},[_c('div',{staticStyle:{\"width\":\"5em\",\"height\":\"10em\",\"margin\":\"1em 0\",\"border\":\"1px solid gray\"},attrs:{\"id\":\"peak-meter-raw\"}}),_c('p',[_vm._v(\"Raw\")])]),_c('v-flex',{attrs:{\"xs6\":\"\",\"sm2\":\"\"}},[_c('div',{staticStyle:{\"width\":\"5em\",\"height\":\"10em\",\"margin\":\"1em 0\",\"border\":\"1px solid gray\"},attrs:{\"id\":\"peak-meter-postgain\"}}),_vm._v(\"\\n      PostGain\\n    \")]),_c('v-spacer')],1),(_vm.recordings.length > 0)?_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recordings\")]),_vm._l((_vm.recordings),function(recording,idx){return _c('div',{key:recording.ts},[_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',[_c('h3',[_vm._v(\"Recording #\"+_vm._s(idx + 1))])]),_c('div',{staticClass:\"ml-3\"},[_c('div',[_c('audio',{attrs:{\"src\":recording.blobUrl,\"controls\":\"true\"}})]),_c('div',[_vm._v(\"\\n                size: \"+_vm._s(_vm._f(\"fileSizeToHumanSize\")(recording.size))+\", type: \"+_vm._s(recording.mimeType)+\"\\n              \")])])])],1)],1),(idx !== (_vm.recordings.length-1))?_c('v-divider'):_vm._e()],1)})],2):_vm._e(),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Source\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test2.vue\"}},[_vm._v(\"src/views/Test3.vue\")]),_c('ul',{staticClass:\"ml-3\"},[_c('li',[_vm._v(\"Primarily: \"),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\"}},[_vm._v(\"src/shared/RecorderService.js\")])])])])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Relevant\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/muaz-khan/RecordRTC/issues/324\"}},[_vm._v(\"https://github.com/muaz-khan/RecordRTC/issues/324\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/ai/audio-recorder-polyfill/issues/4\"}},[_vm._v(\"https://github.com/ai/audio-recorder-polyfill/issues/4\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/danielstorey/webrtc-audio-recording\"}},[_vm._v(\"https://github.com/danielstorey/webrtc-audio-recording\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\"}},[_vm._v(\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\")])]),_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/MicrosoftEdge/Demos/blob/master/microphone\"}},[_vm._v(\"https://github.com/MicrosoftEdge/Demos/blob/master/microphone\")])])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/esonderegger/web-audio-peak-meter\"}},[_vm._v(\"https://github.com/esonderegger/web-audio-peak-meter\")])])])])],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-bc6dafd4\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Test3.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bc6dafd4\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Test3.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Test3.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Test3.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bc6dafd4\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Test3.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-bc6dafd4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Test3.vue\n// module id = null\n// module chunks = ","<template>\n  <v-container mb-5>\n    <v-layout row wrap>\n\n      <div class=\"test2\">\n        <h3>Test 4\n          <span v-if=\"$vuetify.breakpoint.xsOnly\"><br></span>\n          <span v-if=\"!$vuetify.breakpoint.xsOnly\"> - </span>\n          Microphone Selection\n        </h3>\n        <p>Test microphone input selection. See\n          <router-link to=\"/diagnostics\">diagnostics</router-link>\n          for full enumeration and capabilities. Showing\n          microphone labels first requires permissions to an input device. Click eye icon to show microphone labels.\n        </p>\n      </div>\n    </v-layout>\n\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-flex xs9 md6>\n        <v-select\n          :items=\"availableDevices\"\n          v-model=\"selectedDevice\"\n          label=\"Select Mic\"\n          single-line\n          item-text=\"name\"\n          item-value=\"deviceId\"\n        >\n          <!--          <template slot=\"item\" slot-scope=\"data\">\n                      {{data.item.name}}\n                    </template>-->\n        </v-select>\n      </v-flex>\n      <v-flex xs1>\n        <div class=\"input-group\">\n          <v-btn color=\"primary\" flat small @click=\"enumerateDevicesWithPermission\">\n            <v-icon>remove_red_eye</v-icon>\n          </v-btn>\n        </div>\n\n      </v-flex>\n    </v-layout>\n\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <div>\n        <v-btn @click=\"startRecording\" :disabled=\"recordingInProgress\">Start Recording\n        </v-btn>\n        <v-btn @click=\"stopRecording\" :disabled=\"!recordingInProgress\">Stop Recording</v-btn>\n        <v-icon :class=\"recordingInProgress ? 'live' : ''\">mic</v-icon>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap v-if=\"recordings.length > 0\">\n      <h4 class=\"mt-3\">Recordings</h4>\n      <div v-for=\"(recording,idx) in recordings\" :key=\"recording.ts\">\n        <v-card>\n          <v-card-title primary-title>\n            <v-layout column wrap>\n              <div>\n                <h3>Recording #{{ idx + 1 }}</h3>\n              </div>\n              <div class=\"ml-3\">\n                <div>\n                  <audio :src=\"recording.blobUrl\" controls=\"true\"/>\n                </div>\n                <div>\n                  size: {{recording.size | fileSizeToHumanSize}}, type: {{recording.mimeType}}\n                </div>\n              </div>\n            </v-layout>\n          </v-card-title>\n        </v-card>\n        <v-divider v-if=\"idx !== (recordings.length-1)\"/>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap>\n      <h4 class=\"mt-3\">Source</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li><a href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test2.vue\">src/views/Test3.vue</a>\n            <ul class=\"ml-3\">\n              <li>Primarily: <a\n                href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\">src/shared/RecorderService.js</a>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only>\n      <h4 class=\"mt-3\">Relevant</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li><a href=\"https://webrtc.github.io/samples/src/content/devices/input-output/\">https://webrtc.github.io/samples/src/content/devices/input-output/</a>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport RecorderService from '@/shared/RecorderService'\nimport utils from '@/shared/Utils'\n\nexport default {\n  name: 'Test3',\n  filters: {\n    fileSizeToHumanSize (val) {\n      return utils.humanFileSize(val, true)\n    }\n  },\n  data () {\n    return {\n      availableDevices: [],\n      enumeratedDevices: [],\n      selectedDevice: null,\n      recordingInProgress: false,\n      recordings: [],\n      microphones: []\n    }\n  },\n  watch: {},\n  created () {\n    this.recorderSrvc = new RecorderService()\n    this.recorderSrvc.em.addEventListener('recording', (evt) => this.onNewRecording(evt))\n    this.enumerateDevices()\n  },\n  mounted () {\n  },\n  methods: {\n    startRecording () {\n      this.recorderSrvc.config.userMediaConstraints = {audio: {deviceId: this.selectedDevice.device.deviceId}}\n      this.recorderSrvc.startRecording()\n        .then(() => {\n          this.recordingInProgress = true\n        })\n        .catch((error) => {\n          console.error('Exception while start recording: ' + error)\n          alert('Exception while start recording: ' + error.message)\n        })\n    },\n    stopRecording () {\n      this.recorderSrvc.stopRecording()\n      this.recordingInProgress = false\n    },\n    setupAvailDeviceNames () {\n      let availDevices = []\n      this.enumeratedDevices.forEach((device) => {\n        if (device.kind === 'audioinput') {\n          if (!device.label) {\n            this.enumeratedDevicesPermissionNeeded = true\n            availDevices.push({name: 'Audio Input ' + (availDevices.length + 1), device: device})\n          }\n          else {\n            availDevices.push({name: device.label, device: device})\n          }\n        }\n      })\n      this.availableDevices = availDevices\n    },\n    enumerateDevices () {\n      navigator.mediaDevices.enumerateDevices()\n        .then((devices) => {\n          this.enumeratedDevices = devices\n          this.setupAvailDeviceNames()\n          this.selectedDevice = this.availableDevices[0]\n          if (this.stream) {\n            this.stream.getTracks().forEach((track) => track.stop())\n            this.stream = null\n          }\n        })\n        .catch((error) => {\n          console.log(error)\n          this.enumeratedDevices.push({id: '-', kind: 'error', deviceId: 'error'})\n        })\n    },\n    enumerateDevicesWithPermission () {\n      navigator.mediaDevices.getUserMedia({audio: true, deviceId: 'default'})\n        .then((stream) => {\n          this.enumerateDevices()\n          this.stream = stream\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    },\n    onNewRecording (evt) {\n      this.recordings.push(evt.detail.recording)\n    }\n  }\n}\n</script>\n<style lang=\"stylus\" scoped=\"true\">\n  @import '~vuetify/src/stylus/settings/_variables'\n  @media screen and (min-width: $grid-breakpoints.sm)\n    audio\n      width 35em\n\n  @media screen and (max-width: ($grid-breakpoints.sm - 1))\n    audio\n      width 100%\n\n  .live\n    color red\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Test4.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"mb-5\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',{staticClass:\"test2\"},[_c('h3',[_vm._v(\"Test 4\\n        \"),(_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_c('br')]):_vm._e(),(!_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_vm._v(\" - \")]):_vm._e(),_vm._v(\"\\n        Microphone Selection\\n      \")]),_c('p',[_vm._v(\"Test microphone input selection. See\\n        \"),_c('router-link',{attrs:{\"to\":\"/diagnostics\"}},[_vm._v(\"diagnostics\")]),_vm._v(\"\\n        for full enumeration and capabilities. Showing\\n        microphone labels first requires permissions to an input device. Click eye icon to show microphone labels.\\n      \")],1)])]),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs9\":\"\",\"md6\":\"\"}},[_c('v-select',{attrs:{\"items\":_vm.availableDevices,\"label\":\"Select Mic\",\"single-line\":\"\",\"item-text\":\"name\",\"item-value\":\"deviceId\"},model:{value:(_vm.selectedDevice),callback:function ($$v) {_vm.selectedDevice=$$v},expression:\"selectedDevice\"}})],1),_c('v-flex',{attrs:{\"xs1\":\"\"}},[_c('div',{staticClass:\"input-group\"},[_c('v-btn',{attrs:{\"color\":\"primary\",\"flat\":\"\",\"small\":\"\"},on:{\"click\":_vm.enumerateDevicesWithPermission}},[_c('v-icon',[_vm._v(\"remove_red_eye\")])],1)],1)])],1),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',[_c('v-btn',{attrs:{\"disabled\":_vm.recordingInProgress},on:{\"click\":_vm.startRecording}},[_vm._v(\"Start Recording\\n      \")]),_c('v-btn',{attrs:{\"disabled\":!_vm.recordingInProgress},on:{\"click\":_vm.stopRecording}},[_vm._v(\"Stop Recording\")]),_c('v-icon',{class:_vm.recordingInProgress ? 'live' : ''},[_vm._v(\"mic\")])],1)]),(_vm.recordings.length > 0)?_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recordings\")]),_vm._l((_vm.recordings),function(recording,idx){return _c('div',{key:recording.ts},[_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',[_c('h3',[_vm._v(\"Recording #\"+_vm._s(idx + 1))])]),_c('div',{staticClass:\"ml-3\"},[_c('div',[_c('audio',{attrs:{\"src\":recording.blobUrl,\"controls\":\"true\"}})]),_c('div',[_vm._v(\"\\n                size: \"+_vm._s(_vm._f(\"fileSizeToHumanSize\")(recording.size))+\", type: \"+_vm._s(recording.mimeType)+\"\\n              \")])])])],1)],1),(idx !== (_vm.recordings.length-1))?_c('v-divider'):_vm._e()],1)})],2):_vm._e(),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Source\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test2.vue\"}},[_vm._v(\"src/views/Test3.vue\")]),_c('ul',{staticClass:\"ml-3\"},[_c('li',[_vm._v(\"Primarily: \"),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\"}},[_vm._v(\"src/shared/RecorderService.js\")])])])])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Relevant\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://webrtc.github.io/samples/src/content/devices/input-output/\"}},[_vm._v(\"https://webrtc.github.io/samples/src/content/devices/input-output/\")])])])])],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-35a3614b\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Test4.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-35a3614b\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Test4.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Test4.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"C:\\\\\\\\Projects\\\\\\\\prototypes\\\\\\\\2018\\\\\\\\web-audio-tests\\\\\\\\node_modules\\\\\\\\.cache\\\\\\\\cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Test4.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-35a3614b\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Test4.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-35a3614b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Test4.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nimport Home from '@/views/Home'\nimport Diagnostics from '@/views/Diagnostics'\nimport Test1 from '@/views/Test1'\nimport Test2 from '@/views/Test2'\nimport Test3 from '@/views/Test3'\nimport Test4 from '@/views/Test4'\n\nVue.use(VueRouter)\n\nconst router = new VueRouter({\n  mode: 'hash',\n  routes: [\n    {\n      path: '/',\n      name: 'home',\n      component: Home\n    },\n    {\n      path: '/diagnostics',\n      name: 'diagnostics',\n      component: Diagnostics\n    },\n    {\n      path: '/test1',\n      name: 'test1',\n      component: Test1\n    },\n    {\n      path: '/test2',\n      name: 'test2',\n      component: Test2\n    },\n    {\n      path: '/test3',\n      name: 'test3',\n      component: Test3\n    },\n    {\n      path: '/test4',\n      name: 'test4',\n      component: Test4\n    }\n  ]\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import 'babel-polyfill'\nimport Vue from 'vue'\nimport Vuetify from 'vuetify'\nimport App from './App.vue'\nimport router from '@/router/index.js'\n\n// import colors from 'vuetify/es5/util/colors'\n\nVue.use(Vuetify, {\n  theme: {\n    primary: '#546E7A',\n    secondary: '#B0BEC5',\n    accent: '#448AFF',\n    error: '#EF5350',\n    warning: '#FFF176',\n    info: '#2196f3',\n    success: '#4caf50'\n  }\n})\n\nVue.config.productionTip = false\n\nnew Vue({\n  router,\n  render: h => h(App)\n}).$mount('#app')\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}